<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>use closure</title>
</head>

<body>
  <h1>use closure</h1>
  <button onclick="test()">防抖</button>
  <button onclick="test2()">节流</button>
  <p>详情见代码</p>
  <script>
    // 防抖
    function debounce (fn, delay) {
      let timer = null;
      return function () {
        let context = this;
        let args = arguments;
        clearTimeout(timer);
        timer = setTimeout(function () {
          fn.apply(context, args);
        }, delay);
      }
    }
    let a = debounce(getNumber, 1000);
    function test() {
      a();
    }
    function getNumber(){
      console.log('aaa')
    }

    // 节流
    function throttle (fn, delay) {
      let timer = null;
      return function () {
        let context = this;
        let args = arguments;
        if (!timer) {
          timer = setTimeout(function () {
            fn.apply(context, args);
            timer = null;
          }, delay);
        }
      }
    }
    let b = throttle(getNumber, 1000);
    function test2() {
      b();
    }

  </script>
</body>

</html>